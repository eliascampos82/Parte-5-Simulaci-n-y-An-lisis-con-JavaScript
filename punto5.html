<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Parte 5: Simulación JavaScript - Ludopatía en Adolescentes</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #3498db;
        }
        
        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #7f8c8d;
            font-size: 1.1rem;
        }
        
        .section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }
        
        h2 {
            color: #2c3e50;
            margin-bottom: 15px;
        }
        
        h3 {
            color: #3498db;
            margin: 20px 0 10px 0;
        }
        
        p {
            margin-bottom: 15px;
        }
        
        .btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
            transition: background 0.3s;
        }
        
        .btn:hover {
            background: #2980b9;
        }
        
        .result-box {
            background: #e8f4fd;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #3498db;
        }
        
        .probability {
            font-size: 2.5rem;
            font-weight: bold;
            color: #e74c3c;
            text-align: center;
            margin: 10px 0;
        }
        
        .explanation {
            background: #fff9e6;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #f39c12;
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        .data-table th, .data-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        .data-table th {
            background: #3498db;
            color: white;
        }
        
        .data-table tr:nth-child(even) {
            background: #f2f2f2;
        }
        
        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: monospace;
        }
        
        .comparison {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .comparison-box {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            margin: 10px;
            flex: 1;
            min-width: 250px;
            text-align: center;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .comparison {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Parte 5: Simulación y Análisis con JavaScript</h1>
            <p class="subtitle">Trabajo Integrador de Estadística - Ludopatía en Adolescentes</p>
        </header>
        
        <div class="section">
            <h2>¿Qué vamos a simular?</h2>
            <p>Vamos a usar JavaScript para simular la probabilidad de que un adolescente que apuesta tenga comportamientos de alto riesgo, específicamente:</p>
            <ul>
                <li>Que apueste más de 2 veces por semana (alta frecuencia)</li>
                <li>Que apueste más de $10,000 semanales (monto alto)</li>
            </ul>
        </div>
        
        <div class="section">
            <h2>Nuestros Datos Reales</h2>
            <p>Tenemos información de 13 adolescentes que admiten apostar:</p>
            
            <table class="data-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Frecuencia de Apuestas</th>
                        <th>Monto Semanal</th>
                        <th>¿Alto Riesgo?</th>
                    </tr>
                </thead>
                <tbody id="datosTabla">
                    <!-- Los datos se cargarán con JavaScript -->
                </tbody>
            </table>
            
            <div class="explanation">
                <p><strong>Dato importante:</strong> De los 13 adolescentes que apuestan, 8 muestran comportamientos de alto riesgo (61.5%).</p>
            </div>
        </div>
        
        <div class="section">
            <h2>Simulación con JavaScript</h2>
            
            <div class="code-block">
// Función para muestreo aleatorio con reemplazo
function sampleWithReplacement(data, n) {
    const result = [];
    for (let i = 0; i < n; i++) {
        const index = Math.floor(Math.random() * data.length);
        result.push(data[index]);
    }
    return result;
}

// Realizar muestreo de 100 casos
const sample = sampleWithReplacement(apostadores, 100);

// Calcular probabilidad de alto riesgo
const altoRiesgo = sample.filter(p => p.altoRiesgo).length;
const probabilidad = (altoRiesgo / sample.length * 100).toFixed(1);

console.log("Probabilidad estimada:", probabilidad + "%");
            </div>
            
            <div style="text-align: center;">
                <button class="btn" onclick="ejecutarSimulacion()">Ejecutar Simulación</button>
                <button class="btn" onclick="ejecutarMultiplesVeces()">Ejecutar 10 Veces</button>
            </div>
            
            <div id="resultado"></div>
        </div>
        
        <div class="section">
            <h2>¿Qué significa esta probabilidad?</h2>
            
            <div class="comparison">
                <div class="comparison-box">
                    <h3>Probabilidad Real</h3>
                    <div class="probability">61.5%</div>
                    <p>8 de 13 adolescentes muestran alto riesgo</p>
                </div>
                
                <div class="comparison-box">
                    <h3>Probabilidad Simulada</h3>
                    <div class="probability" id="probabilidadSimulada">--</div>
                    <p id="detalleSimulacion">Ejecuta la simulación</p>
                </div>
            </div>
            
            <div class="explanation">
                <p><strong>Explicación:</strong> La probabilidad obtenida representa la chance de que un adolescente seleccionado al azar entre los que apuestan tenga comportamientos de alto riesgo (frecuencia alta o montos elevados).</p>
            </div>
        </div>
        
        <div class="section">
            <h2>Relación con Gráficos Anteriores</h2>
            
            <h3>Gráfico de Frecuencia vs. Simulación</h3>
            <p>En el análisis anterior vimos que el 46.2% de los adolescentes apuesta 6-7 días por semana. Nuestra simulación confirma que aproximadamente 6 de cada 10 adolescentes que apuestan tienen comportamientos preocupantes.</p>
            
            <h3>Gráfico de Montos vs. Simulación</h3>
            <p>El 46.2% apuesta más de $10,000 semanales. La simulación nos ayuda a entender que esto no es un caso aislado, sino un patrón común entre los adolescentes que apuestan.</p>
            
            <h3>¿Por qué son importantes estas simulaciones?</h3>
            <ul>
                <li>Nos permiten predecir comportamientos en grupos más grandes</li>
                <li>Ayudan a diseñar programas de prevención más efectivos</li>
                <li>Permiten entender la magnitud real del problema</li>
                <li>Son una herramienta para comunicar riesgos a padres y educadores</li>
            </ul>
        </div>
        
        <div class="section">
            <h2>Conclusión</h2>
            <p>La simulación con JavaScript confirma lo que observamos en los datos reales: <strong>aproximadamente 6 de cada 10 adolescentes que apuestan muestran comportamientos de alto riesgo</strong>.</p>
            
            <div class="explanation">
                <p>Esto significa que el problema no es solo que algunos adolescentes apuesten, sino que la mayoría de los que lo hacen desarrollan patrones preocupantes que requieren intervención inmediata.</p>
            </div>
            
            <p>La simulación nos da una herramienta poderosa para entender y comunicar la urgencia de implementar programas de prevención y educación sobre los riesgos de la ludopatía en adolescentes.</p>
        </div>
    </div>

    <script>
        // Datos reales de los adolescentes que apuestan
        const apostadores = [
            { id: 1, frecuencia: '6-7 días/sem', monto: '>$10,000', altoRiesgo: true },
            { id: 2, frecuencia: '1-2 días/sem', monto: '$1,000-$5,000', altoRiesgo: false },
            { id: 3, frecuencia: '6-7 días/sem', monto: '$5,000-$10,000', altoRiesgo: true },
            { id: 4, frecuencia: '3-5 días/sem', monto: '$1,000-$5,000', altoRiesgo: false },
            { id: 5, frecuencia: '1-2 días/sem', monto: '$1,000-$5,000', altoRiesgo: false },
            { id: 6, frecuencia: '6-7 días/sem', monto: '>$10,000', altoRiesgo: true },
            { id: 7, frecuencia: '6-7 días/sem', monto: '>$10,000', altoRiesgo: true },
            { id: 8, frecuencia: '1-2 días/sem', monto: '$1,000-$5,000', altoRiesgo: false },
            { id: 9, frecuencia: '3-5 días/sem', monto: '$5,000-$10,000', altoRiesgo: false },
            { id: 10, frecuencia: '6-7 días/sem', monto: '>$10,000', altoRiesgo: true },
            { id: 11, frecuencia: '1-2 días/sem', monto: '$1,000-$5,000', altoRiesgo: false },
            { id: 12, frecuencia: '6-7 días/sem', monto: '>$10,000', altoRiesgo: true },
            { id: 13, frecuencia: '6-7 días/sem', monto: '>$10,000', altoRiesgo: true }
        ];

        // Función para mostrar datos en la tabla
        function mostrarDatosEnTabla() {
            const tbody = document.getElementById('datosTabla');
            tbody.innerHTML = '';
            
            apostadores.forEach(apostador => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${apostador.id}</td>
                    <td>${apostador.frecuencia}</td>
                    <td>${apostador.monto}</td>
                    <td>${apostador.altoRiesgo ? 'SÍ' : 'No'}</td>
                `;
                tbody.appendChild(tr);
            });
        }

        // Función para muestreo aleatorio con reemplazo
        function sampleWithReplacement(data, n) {
            const result = [];
            for (let i = 0; i < n; i++) {
                const index = Math.floor(Math.random() * data.length);
                result.push(data[index]);
            }
            return result;
        }

        // Función para ejecutar una simulación
        function ejecutarSimulacion() {
            // Realizar muestreo de 100 casos
            const sample = sampleWithReplacement(apostadores, 100);
            
            // Calcular probabilidad de alto riesgo
            const altoRiesgo = sample.filter(p => p.altoRiesgo).length;
            const probabilidad = (altoRiesgo / sample.length * 100).toFixed(1);
            
            // Mostrar resultado
            mostrarResultado(probabilidad, altoRiesgo);
        }

        // Función para ejecutar múltiples simulaciones
        function ejecutarMultiplesVeces() {
            let resultados = [];
            
            // Ejecutar 10 simulaciones
            for (let i = 0; i < 10; i++) {
                const sample = sampleWithReplacement(apostadores, 100);
                const altoRiesgo = sample.filter(p => p.altoRiesgo).length;
                const probabilidad = (altoRiesgo / sample.length * 100).toFixed(1);
                resultados.push(probabilidad);
            }
            
            // Calcular promedio
            const promedio = (resultados.reduce((a, b) => parseFloat(a) + parseFloat(b), 0) / 10).toFixed(1);
            
            // Mostrar resultados
            mostrarResultadoMultiple(promedio, resultados);
        }

        // Función para mostrar resultado de una simulación
        function mostrarResultado(probabilidad, altoRiesgo) {
            const resultadoDiv = document.getElementById('resultado');
            resultadoDiv.innerHTML = `
                <div class="result-box">
                    <h3>Resultado de la Simulación</h3>
                    <div class="probability">${probabilidad}%</div>
                    <p>De 100 adolescentes simulados, <strong>${altoRiesgo}</strong> mostraron comportamientos de alto riesgo.</p>
                    <p>Esto significa que aproximadamente <strong>${probabilidad}%</strong> de los adolescentes que apuestan tienen alta frecuencia o montos elevados.</p>
                </div>
            `;
            
            // Actualizar comparación
            document.getElementById('probabilidadSimulada').textContent = probabilidad + '%';
            document.getElementById('detalleSimulacion').textContent = `${altoRiesgo} de 100 casos simulados`;
        }

        // Función para mostrar resultados múltiples
        function mostrarResultadoMultiple(promedio, resultados) {
            const resultadoDiv = document.getElementById('resultado');
            
            let detalles = '<p><strong>Resultados individuales:</strong> ';
            resultados.forEach((prob, index) => {
                detalles += `Simulación ${index+1}: ${prob}% | `;
            });
            detalles = detalles.slice(0, -2) + '</p>';
            
            resultadoDiv.innerHTML = `
                <div class="result-box">
                    <h3>Resultado de 10 Simulaciones</h3>
                    <div class="probability">${promedio}%</div>
                    <p>Promedio de probabilidad después de 10 simulaciones</p>
                    ${detalles}
                    <p>La probabilidad promedio es <strong>${promedio}%</strong>, muy cercana al valor real de 61.5%.</p>
                </div>
            `;
            
            // Actualizar comparación
            document.getElementById('probabilidadSimulada').textContent = promedio + '%';
            document.getElementById('detalleSimulacion').textContent = 'Promedio de 10 simulaciones';
        }

        // Inicializar la página
        document.addEventListener('DOMContentLoaded', function() {
            mostrarDatosEnTabla();
        });
    </script>
</body>
</html>